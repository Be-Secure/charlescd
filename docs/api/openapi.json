{
  "openapi": "3.0.0",
  "info": {
    "title": "Charles",
    "description": "Charles APIs",
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0"
    },
    "version": "0.0.1"
  },
  "servers": [
    {
      "url": "http://localhost:8080/v1",
      "description": "Default Server URL"
    }
  ],
  "security": [
    {
      "bearer": [
        "bearer"
      ]
    },
    {
      "app_key": [
        "app_key"
      ]
    }
  ],
  "tags": [
    {
      "name": "workspace"
    },
    {
      "name": "metrics"
    },
    {
      "name": "circle"
    },
    {
      "name": "component"
    },
    {
      "name": "deployment"
    },
    {
      "name": "users"
    },
    {
      "name": "authorization"
    }
  ],
  "paths": {
    "/workspaces": {
      "get": {
        "summary": "List workspaces",
        "description": "List all the workspaces the user has access to, sorted by creation date descending",
        "tags": [
          "workspace"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/pageSize"
          },
          {
            "$ref": "#/components/parameters/pageNumber"
          },
          {
            "$ref": "#/components/parameters/nameFilter"
          }
        ],
        "responses": {
          "200": {
            "description": "The list of workspaces",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/pageResponse"
                    },
                    {
                      "properties": {
                        "content": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/workspaceResponse"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create workspace",
        "description": "Create a new Workspace, the only required property is the name. The others are optional for creation, but for the workspace works, the other configuration is needed",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/workspaceRequest"
                  }
                ],
                "properties": {
                  "deployConfig": {
                    "$ref": "#/components/schemas/deploymentConfigSchema"
                  },
                  "circleMatcher": {
                    "$ref": "#/components/schemas/circleMatcherSchema"
                  },
                  "gitconfig": {
                    "$ref": "#/components/schemas/gitConfigSchema"
                  },
                  "datasources": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/datasourceRequest"
                    }
                  },
                  "actions": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/actionRequest"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The workspace that was created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/workspaceFullResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "get": {
        "summary": "Get workspace by id",
        "description": "If the user has the permissions to see it, retrieve the requested workspace",
        "tags": [
          "workspace"
        ],
        "responses": {
          "200": {
            "description": "The workspace requested",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/workspaceFullResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete workspace",
        "description": "Deletes the workspace, this deletion is made in a logical manner",
        "tags": [
          "workspace"
        ],
        "responses": {
          "204": {
            "description": "If the workspace was deleted successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update name",
        "description": "Updates the workspace name",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/workspaceRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "The updated workspace"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/status": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "get": {
        "summary": "The workspace status",
        "description": "Retrieve the status of the workspace and all it's settings",
        "tags": [
          "workspace"
        ],
        "responses": {
          "200": {
            "description": "The workspace status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/workspaceStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/configurations/matcher": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "patch": {
        "summary": "Set Matcher URL",
        "description": "Save the circle matcher URl for that workspace, if an URl already exists, it's value is updated",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/circleMatcherSchema"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If the matcher URL was saved successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Deletes a matcher configuration",
        "description": "Deletes the matcher configuration from the specified workspace",
        "tags": [
          "workspace"
        ],
        "responses": {
          "204": {
            "description": "When the matcher configuration was deleted successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists, or there is no matcher to be deleted"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/configurations/matcher/validate": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Validate circle matcher",
        "description": "Validate the circle matcher URl, and checks if it's reachable, this is recommended before it's creation",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/circleMatcherSchema"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If the matcher is reachable"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/configurations/deployment": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "patch": {
        "summary": "Set deployment configuration",
        "description": "Save the deployment configuration for that workspace, if a configuration already exists, it's value is updated",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/deploymentConfigSchema"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If the deployment configuration was updated successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Deletes a deployment configuration",
        "description": "Deletes the deployment configuration from the specified workspace",
        "tags": [
          "workspace"
        ],
        "responses": {
          "204": {
            "description": "When the deployment configuration was deleted successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists, or there is no matcher to be deleted"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/configurations/deployment/validate": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Validate deployment config",
        "description": "Validate the deployment configuration, and checks if it's reachable, this is recommended before it's creation",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/deploymentConfigSchema"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If deployment system is reachable"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/configurations/git": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "patch": {
        "summary": "Set git configuration",
        "description": "Save the git configuration for that workspace, if a configration already exists, it's value is updated",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/gitConfigSchema"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If the git configuration was updated successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Deletes a git configuration",
        "description": "Deletes the git configuration from the specified workspace",
        "tags": [
          "workspace"
        ],
        "responses": {
          "204": {
            "description": "When the git configuration was deleted successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists, or there is no matcher to be deleted"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/configurations/git/validate": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Validate git configuration",
        "description": "Validate the git configuration and checks if it's reachable, this is recommended before it's creation",
        "tags": [
          "workspace"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/gitConfigSchema"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If butler is reachable"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/{workspaceId}/routing": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "get": {
        "summary": "Workspace routing",
        "description": "The present routing of the workspace, basically return the virtual service and the destination rules",
        "tags": [
          "workspace"
        ],
        "responses": {
          "200": {
            "description": "The routing information"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/workspaces/{workspaceId}/datasources": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Create new datasource configuration",
        "description": "Creates a new datasource configuration for the workspace",
        "tags": [
          "metrics"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/datasourceRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "When the datasource configuration was set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/datasourceResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List all the datasources",
        "description": "List all the datasources registered for the workspace",
        "tags": [
          "metrics"
        ],
        "responses": {
          "200": {
            "description": "the datasources from the workspace",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/datasourceResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/workspaces/{workspaceId}/datasources/validate": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Validate datasource connection",
        "description": "Validate if the datasource is reachable, this is recommended before it's creation",
        "tags": [
          "metrics"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/datasourceValidationRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If the datasource is reachable"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/workspaces/{workspaceId}/datasources/{datasourceId}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        },
        {
          "description": "The datasource id",
          "required": true,
          "name": "datasourceId",
          "in": "path",
          "schema": {
            "type": "string",
            "format": "uuid"
          }
        }
      ],
      "delete": {
        "summary": "Delete datasource configuration",
        "description": "Deletes the datasource configuration from the workspace",
        "tags": [
          "metrics"
        ],
        "responses": {
          "204": {
            "description": "The datasource was deleted successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace or the datasource not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/workspaces/{workspaceId}/actions": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Create new action configuration",
        "description": "Creates a new action configuration for the workspace",
        "tags": [
          "metrics"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/actionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The action rollout was configured with success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/actionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List all the actions",
        "description": "List all the actions registered for the workspace",
        "tags": [
          "metrics"
        ],
        "responses": {
          "200": {
            "description": "The actions configured for that workspace",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/actionResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/workspaces/{workspaceId}/actions/validate": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Validate action",
        "description": "Validate if the action works, and all its configurations are ok, this is recommended before it's creation",
        "tags": [
          "metrics"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/actionValidationRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If the action is working"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/workspaces/{workspaceId}/actions/{actionId}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        },
        {
          "description": "The action id",
          "required": true,
          "name": "actionId",
          "in": "path",
          "schema": {
            "type": "string",
            "format": "uuid"
          }
        }
      ],
      "delete": {
        "summary": "Delete action configuration",
        "description": "Deletes the action configuration from the workspace",
        "tags": [
          "metrics"
        ],
        "responses": {
          "204": {
            "description": "The action configuration was excluded successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace or the datasource not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/metrics/plugins": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "get": {
        "summary": "List available plugins",
        "description": "List all available plugins, and the API allow filtering for listing the plugins by type",
        "tags": [
          "metrics"
        ],
        "parameters": [
          {
            "description": "The plugin type filter",
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "example": "datasource"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The available plugins",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/pluginResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "get": {
        "summary": "List circles",
        "description": "List all the circles in the workspace that the user has access to, the API can receive filters, like circle status (active, inactive), this API is paginated and sorted, the default sorting is the creation date descending, with the newer circles first",
        "tags": [
          "circle"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/pageSize"
          },
          {
            "$ref": "#/components/parameters/pageNumber"
          },
          {
            "$ref": "#/components/parameters/nameFilter"
          },
          {
            "description": "If the circles are active",
            "name": "active",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The list of circles",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/pageResponse"
                    },
                    {
                      "properties": {
                        "content": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/circleResponse"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create circle",
        "description": "Create a new circle with it's segmentation rules",
        "tags": [
          "circle"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/circleRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The circle that was created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/circleFullResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/csv": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "post": {
        "summary": "Create circle with CSV attached file",
        "description": "Create a new circle with a CSV file with the segmentation rules",
        "tags": [
          "circle"
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/circleCsvRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The circle that was created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/circleFullResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/{circleId}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathCircleId"
        },
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "delete": {
        "summary": "Delete circle",
        "description": "Deletes the circle",
        "tags": [
          "circle"
        ],
        "responses": {
          "204": {
            "description": "The circle was deleted successfully"
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The circle does not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Get circle",
        "description": "Get the requested circle, if the user has the permissions to",
        "tags": [
          "circle"
        ],
        "responses": {
          "200": {
            "description": "The circle full information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/circleFullResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The circle does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update the circle segmentation (not csv) and/or name",
        "description": "Updates the circle's segmentation (not csv) rules and/or name",
        "tags": [
          "circle"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/circleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The updated circle",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/circleFullResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The circle does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/{circleId}/status": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        },
        {
          "$ref": "#/components/parameters/pathCircleId"
        }
      ],
      "get": {
        "summary": "Circle status",
        "description": "Show the status of the cluster and applications for each component",
        "tags": [
          "circle"
        ],
        "responses": {
          "200": {
            "description": "The status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/circleComponentStatusResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The circle does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/{circleId}/histories": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        },
        {
          "$ref": "#/components/parameters/pathCircleId"
        }
      ],
      "get": {
        "summary": "Circle deployment history",
        "description": "The circle history, shows every change to circles caused by an API call",
        "tags": [
          "circle"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "ids",
            "description": "The circles id",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          {
            "in": "query",
            "name": "author",
            "description": "The username of who made the change",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          {
            "in": "query",
            "name": "date",
            "description": "The when the changes were made ",
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The history objects"
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/{circleId}/csv": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathCircleId"
        },
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "patch": {
        "summary": "Update the circle segmentation with a csv",
        "description": "Updates the circle's segmentation rules with a csv file",
        "tags": [
          "circle"
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/circleCsvRuleRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "The circle's rules was updated successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The circle does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/identify": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "post": {
        "summary": "Identify",
        "description": "Call the circle matcher of the workspace with the passed identify payload to verify in which circles the possible user belongs",
        "tags": [
          "circle"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/identifyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The circles which the user may be part of",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/identifyResponse"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/open-sea": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "get": {
        "summary": "Get open sea",
        "description": "Get open sea information",
        "tags": [
          "circle"
        ],
        "responses": {
          "200": {
            "description": "Open sea information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/openSeaResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/components": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        }
      ],
      "get": {
        "summary": "Get components",
        "description": "Get all components in the workspace",
        "tags": [
          "component"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/pageSize"
          },
          {
            "$ref": "#/components/parameters/pageNumber"
          }
        ],
        "responses": {
          "200": {
            "description": "Components information",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/pageResponse"
                    }
                  ],
                  "properties": {
                    "content": {
                      "items": {
                        "$ref": "#/components/schemas/componentResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create components",
        "description": "Create the components in the workspace",
        "tags": [
          "component"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/componentSchema"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Components information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/componentResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/components/{componentId}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        },
        {
          "in": "path",
          "name": "componentId",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid"
          }
        }
      ],
      "delete": {
        "summary": "Delete components",
        "description": "Delete a component from workspace",
        "tags": [
          "component"
        ],
        "responses": {
          "204": {
            "description": "When the component was removed successfully"
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace or the component does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Get component",
        "description": "Get component information",
        "tags": [
          "component"
        ],
        "responses": {
          "200": {
            "description": "Component complete information",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/componentSchema"
                    },
                    {
                      "$ref": "#/components/schemas/componentResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update component",
        "description": "Updates the component",
        "tags": [
          "component"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/componentSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Components information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/componentResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "post": {
        "summary": "Create user locally",
        "description": "Create a user locally in a context with no integration with an IDP or similar",
        "tags": [
          "users"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/userSchema"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/userResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}": {
      "parameters": [
        {
          "in": "path",
          "name": "userId",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid"
          }
        }
      ],
      "get": {
        "summary": "Get user",
        "description": "Get all data about specified user",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "User complete information",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/userResponse"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update user",
        "description": "Updates the specified user",
        "tags": [
          "users"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/userSchema"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/userResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete specified user",
        "description": "Performs a soft deletion on specified user and disassociate from all groups. Due to audit consistency, the user cannot be hard deleted",
        "tags": [
          "users"
        ],
        "responses": {
          "204": {
            "description": "The user was removed successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace or the component does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}/user-groups": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathUserId"
        }
      ],
      "get": {
        "summary": "List all groups of a User",
        "description": "Lists all the groups that a user is part of",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "All groups that the user is part of",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/userGroupsResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/{circleId}/deployments/deploy": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        },
        {
          "$ref": "#/components/parameters/pathCircleId"
        }
      ],
      "post": {
        "summary": "Deploy releases at circle",
        "description": "Makes the deployment of the requested components at circle, if the circle already has an active release deployed, it will be overwritten",
        "tags": [
          "deployment"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/deploymentRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The deployment request was made successfully and there isn't any active release deployed yet"
          },
          "204": {
            "description": "The deployment request was made successfully and the the circle already has  an active deployment and it was overwrite"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "If the circle or some component does not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/{circleId}/deployments/undeploy": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        },
        {
          "$ref": "#/components/parameters/pathCircleId"
        }
      ],
      "post": {
        "summary": "Undeploy releases at circle",
        "description": "Makes the undeploy of all components at circle",
        "tags": [
          "deployment"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/partialUnDeploymentRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "The un-deployment request was made successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "If the circle does not exist, or there aren't releases deployed"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/circles/{circleId}/deployments/rollback": {
      "parameters": [
        {
          "$ref": "#/components/parameters/headerWorkspaceId"
        },
        {
          "$ref": "#/components/parameters/pathCircleId"
        }
      ],
      "post": {
        "summary": "Execute rollback at circle",
        "description": "Executes a rollback at circle, if no release is specified, it will make the rollback to the the release immediate before to the actual one",
        "tags": [
          "deployment"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/releaseRollbackRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "The rollback request was made successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token / workspace-id header is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "If the circle does not exist or there aren't releases deployed"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/authorization/user-groups": {
      "get": {
        "summary": "List user groups",
        "description": "List all user groups registered",
        "tags": [
          "authorization"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/pageNumber"
          },
          {
            "$ref": "#/components/parameters/pageSize"
          }
        ],
        "responses": {
          "200": {
            "description": "The user groups",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/pageResponse"
                    },
                    {
                      "properties": {
                        "content": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/userGroupsResponse"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create user group",
        "description": "Creates a new user group",
        "tags": [
          "authorization"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/userGroupRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The user group",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/userGroupFullResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/authorization/user-groups/{groupId}": {
      "parameters": [
        {
          "description": "The user group id",
          "name": "groupId",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid",
            "example": "c3e56c4f-9eb3-4397-99be-ac598ca02bdc"
          }
        }
      ],
      "get": {
        "summary": "Get user group",
        "description": "Get the request user group",
        "tags": [
          "authorization"
        ],
        "responses": {
          "200": {
            "description": "The user group full information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/userGroupFullResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The user group does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update user group",
        "description": "Updates the user group name",
        "tags": [
          "authorization"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/userGroupRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The user group",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/userGroupFullResponse"
                }
              }
            }
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The user group does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete user group",
        "description": "Deletes an user group",
        "tags": [
          "authorization"
        ],
        "responses": {
          "204": {
            "description": "If the group was deleted successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The user group does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/authorization/user-groups/{groupId}/members": {
      "parameters": [
        {
          "description": "The user group id",
          "name": "groupId",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid",
            "example": "c3e56c4f-9eb3-4397-99be-ac598ca02bdc"
          }
        }
      ],
      "post": {
        "summary": "Add member to user group",
        "description": "Adds new members to the user group, this method works with bulking, allowing receive from 1 to N users to added, if one user is not added, a message will be returned informing which one was not added and the problem, the others will be added normally",
        "tags": [
          "authorization"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/userGroupMemberRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "If at least one member was added successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The user group does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/authorization/user-groups/{groupId}/members/{userId}": {
      "parameters": [
        {
          "description": "The user group id",
          "name": "groupId",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid",
            "example": "c3e56c4f-9eb3-4397-99be-ac598ca02bdc"
          }
        },
        {
          "$ref": "#/components/parameters/pathUserId"
        }
      ],
      "delete": {
        "summary": "Remove member from user group",
        "description": "Removes a member from the user group",
        "tags": [
          "authorization"
        ],
        "responses": {
          "204": {
            "description": "If the member was removed successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The user group does not exists"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/authorization/user-groups-binding": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        }
      ],
      "post": {
        "summary": "Associate user group to workspace",
        "description": "Associates an user group to a workspace with it's permissions",
        "tags": [
          "authorization"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/userGroupWorkspaceRequest"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "If the group was associated to the workspace successfully"
          },
          "400": {
            "description": "Provided data is invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse400"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace or the group does not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List user groups at workspace",
        "description": "List all user groups registered at workspace",
        "tags": [
          "authorization"
        ],
        "responses": {
          "200": {
            "description": "If the group was associated to the workspace successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/userGroupWorkspaceResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace does not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    },
    "/authorization/user-groups-binding/{bindingId}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/pathWorkspaceId"
        },
        {
          "description": "The user group id",
          "name": "bindingId",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid"
          }
        }
      ],
      "delete": {
        "summary": "Disassociate user group from workspace",
        "description": "Disassociate an user group from a workspace",
        "tags": [
          "authorization"
        ],
        "responses": {
          "204": {
            "description": "If the group was Disassociate from the workspace successfully"
          },
          "401": {
            "description": "Token is not sent or is invalid"
          },
          "403": {
            "description": "Client doesn't have permissions to call the API"
          },
          "404": {
            "description": "The workspace or the group does not exist"
          },
          "5XX": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse500"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearer": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Token got by the login system and generated by an IDP, this token contains some basic user info, and is used for authorizing the use, or not, of the APIs by the user"
      },
      "app_key": {
        "type": "apiKey",
        "name": "x-app-key",
        "in": "header",
        "description": "Systemic token used by other applications to make calls to the APIs, this token is generated internally and should be stored as a secret by the client"
      }
    },
    "schemas": {
      "errorObject": {
        "description": "Basic error structure",
        "required": [
          "id",
          "status",
          "title"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "6510df42-1fb3-49c6-aeb8-6477e9d24a82",
            "description": "A unique identifier for this particular occurrence of the problem"
          },
          "status": {
            "type": "string",
            "example": "400",
            "description": "The HTTP status code applicable to this problem, expressed as a string value"
          },
          "code": {
            "type": "string",
            "example": "CH0001",
            "description": "An application-specific error code, expressed as a string value"
          },
          "title": {
            "type": "string",
            "example": "Invalid parameters",
            "description": "A short, human-readable summary of the problem that SHOULD NOT change from occurrence to occurrence of the problem"
          },
          "detail": {
            "type": "string",
            "example": "The parameter 'name' must not be blank",
            "description": "A human-readable explanation specific to this occurrence of the problem"
          },
          "source": {
            "type": "object",
            "description": "An object containing references to the source of the error, optionally including any of the following members",
            "properties": {
              "pointer": {
                "type": "string",
                "example": "/datasouces[1]/name",
                "description": "A JSON Pointer RFC6901 to the associated entity in the request document"
              },
              "parameter": {
                "type": "string",
                "description": "A string indicating which URI query parameter caused the error"
              }
            }
          },
          "meta": {
            "type": "object",
            "description": "A meta object containing non-standard meta-information about the error",
            "example": {
              "component": "core",
              "timestamp": 1593212343454
            }
          }
        }
      },
      "errorArray": {
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/errorObject"
            }
          }
        }
      },
      "errorResponse400": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorArray"
          },
          {
            "type": "object",
            "example": {
              "errors": [
                {
                  "id": "6510df42-1fb3-49c6-aeb8-6477e9d24a82",
                  "status": "400",
                  "title": "Invalid payload",
                  "detail": "The 'name' attribute cannot be blank",
                  "source": {
                    "pointer": "/datasources/0/name"
                  },
                  "meta": {
                    "component": "core",
                    "workspaceId": "819fa39c-1fb3-49c6-aeb8-6477e9d24a93",
                    "timestamp": "1593212343454"
                  }
                }
              ]
            }
          }
        ]
      },
      "errorResponse500": {
        "allOf": [
          {
            "$ref": "#/components/schemas/errorArray"
          },
          {
            "type": "object",
            "example": {
              "errors": [
                {
                  "id": "6510df42-1fb3-49c6-aeb8-6477e9d24a82",
                  "status": "502",
                  "code": "CH0002",
                  "title": "Internal server error",
                  "detail": "Bad gateway when calling the deployment service",
                  "source": {
                    "pointer": "/components/0"
                  },
                  "meta": {
                    "component": "butler",
                    "timestamp": "1593212343454"
                  }
                }
              ]
            }
          }
        ]
      },
      "pageResponse": {
        "description": "The page response object, used for represent the paging for paginated lists",
        "properties": {
          "page": {
            "description": "The page number",
            "type": "integer",
            "example": 3
          },
          "size": {
            "description": "The page size",
            "type": "integer",
            "example": 20
          },
          "totalPages": {
            "description": "The total number of pages",
            "type": "integer",
            "example": 5
          },
          "content": {
            "type": "array"
          }
        }
      },
      "workspaceFullResponse": {
        "description": "The workspace full content",
        "allOf": [
          {
            "$ref": "#/components/schemas/workspaceResponse"
          }
        ],
        "properties": {
          "circleMatcherUrl": {
            "type": "string",
            "format": "url",
            "example": "https://circle-matcher.charles.com"
          },
          "deployConfiguration": {
            "type": "string",
            "example": "Butler Sandbox"
          },
          "status": {
            "type": "string",
            "example": "COMPLETED",
            "description": "Tells if the workspace has all it's requirements fulfilled"
          },
          "gitConfiguration": {
            "type": "string",
            "example": "ZupGithub"
          },
          "datasources": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/datasourceResponse"
            }
          },
          "actions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/actionResponse"
            }
          },
          "groups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/userGroupWorkspaceResponse"
            }
          }
        }
      },
      "workspaceResponse": {
        "description": "The workspace basic information",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
          },
          "name": {
            "type": "string",
            "format": "text",
            "example": "Tortoise's Workspace"
          }
        }
      },
      "workspaceStatusResponse": {
        "description": "The workspace basic information",
        "properties": {
          "status": {
            "type": "string",
            "example": "COMPLETED"
          },
          "circleMatcherStatus": {
            "type": "string",
            "example": "OK"
          },
          "butlerStatus": {
            "type": "string",
            "example": "FAILED"
          },
          "datasourceStatus": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/workspaceItemStatusField"
            }
          },
          "actionStatus": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/workspaceItemStatusField"
            }
          }
        }
      },
      "workspaceRequest": {
        "description": "The workspace request used to create or update a workspace",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "format": "text",
            "maximum": 64,
            "example": "Tortoise's workspace"
          }
        }
      },
      "circleMatcherSchema": {
        "description": "The circle matcher request object used to create a new matcher configuration",
        "properties": {
          "url": {
            "type": "string",
            "format": "url",
            "example": "https://circle-matcher.charles.com",
            "maximum": 1048
          }
        }
      },
      "deploymentConfigSchema": {
        "description": "The butler request object used to create a new butler configuration",
        "required": [
          "name",
          "url",
          "namespace"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Butler sandbox",
            "maximum": 100
          },
          "url": {
            "type": "string",
            "format": "url",
            "example": "https://butler.cahrles.com",
            "maximum": 1048
          },
          "namespace": {
            "type": "string",
            "example": "sandbox",
            "maximum": 253
          }
        }
      },
      "gitConfigSchema": {
        "description": "The git config request object",
        "required": [
          "name",
          "type",
          "gitToken"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Zup GitHub",
            "maximum": 100
          },
          "url": {
            "type": "string",
            "format": "url",
            "example": "https://api.github.com",
            "maximum": 1048
          },
          "type": {
            "type": "string",
            "enum": [
              "GITHUB",
              "GITLAB"
            ]
          },
          "gitToken": {
            "type": "string",
            "example": "12389795abc98qu32",
            "maximum": 255
          }
        }
      },
      "datasourceRequest": {
        "description": "The datasource request object, used to create new configuration",
        "required": [
          "name",
          "type",
          "configuration"
        ],
        "properties": {
          "name": {
            "description": "The configuration name, used for easy look up after the registration",
            "type": "string",
            "example": "Prometheus",
            "maximum": 64
          },
          "type": {
            "description": "The plugin that will be used for the executions of this datasource",
            "type": "string",
            "example": "Prometheus",
            "maximum": 30
          },
          "configuration": {
            "description": "The specific configuration for that datasource works, like credentials and url, this filed is treated as an generic json object",
            "type": "object",
            "example": {
              "url": "https://prometheus-server.com",
              "key": "prom-api-key"
            }
          }
        }
      },
      "datasourceValidationRequest": {
        "description": "The datasource validation request object, used to validate a configuration",
        "required": [
          "type",
          "configuration"
        ],
        "properties": {
          "type": {
            "description": "The plugin that will be used for the executions of this datasource",
            "type": "string",
            "example": "Prometheus",
            "maximum": 30
          },
          "configuration": {
            "description": "The specific configuration for that datasource works, like credentials and url, this filed is treated as an generic json object",
            "type": "object",
            "example": {
              "url": "https://prometheus-server.com",
              "key": "prom-api-key"
            }
          }
        }
      },
      "datasourceResponse": {
        "description": "The datasource configuration basic information",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "6510df42-1fb3-49c6-aeb8-6477e9d24a82",
            "description": "The datasource unique id"
          },
          "name": {
            "description": "The configuration name, used for easy look up after the registration",
            "type": "string",
            "example": "Prometheus",
            "maximum": 64
          }
        }
      },
      "actionRequest": {
        "description": "The rollout action request object, used to create new configuration",
        "required": [
          "name",
          "description",
          "type",
          "configuration"
        ],
        "properties": {
          "name": {
            "description": "The configuration name, used for easy look up after the registration",
            "type": "string",
            "example": "Circle Promotion",
            "maximum": 64
          },
          "description": {
            "description": "Some description, used for describe the configuration",
            "type": "string",
            "example": "Circle Promotion to circle Abc",
            "maximum": 100
          },
          "type": {
            "description": "The plugin that will be used for the executions of this action",
            "type": "string",
            "example": "circle-promotion",
            "maximum": 30
          },
          "configuration": {
            "description": "The specific configuration for that action to works, like credentials and url, this filed is treated as an generic json object",
            "type": "object",
            "example": {
              "destinationCircle": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
            }
          }
        }
      },
      "actionValidationRequest": {
        "description": "The rollout action validation request object, used to validate a configuration",
        "required": [
          "type",
          "configuration"
        ],
        "properties": {
          "type": {
            "description": "The plugin that will be used for the executions of this action",
            "type": "string",
            "example": "circle-promotion",
            "maximum": 30
          },
          "configuration": {
            "description": "The specific configuration for that action to works, like credentials and url, this filed is treated as an generic json object",
            "type": "object",
            "example": {
              "destinationCircle": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
            }
          }
        }
      },
      "actionResponse": {
        "description": "The action configuration basic information",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "6510df42-1fb3-49c6-aeb8-6477e9d24a82",
            "description": "The action unique id"
          },
          "name": {
            "description": "The configuration name, used for easy look up after the registration",
            "type": "string",
            "example": "Circle Promotion",
            "maximum": 64
          },
          "description": {
            "description": "Some description, used for describe the configuration",
            "type": "string",
            "example": "Circle Promotion to circle Abc",
            "maximum": 100
          }
        }
      },
      "pluginResponse": {
        "description": "The plugin full information",
        "properties": {
          "id": {
            "type": "string",
            "example": "prometheus",
            "description": "The plugin unique id"
          },
          "name": {
            "description": "The plugin name",
            "type": "string",
            "example": "Prometheus"
          },
          "description": {
            "description": "Some description for the plugin",
            "type": "string",
            "example": "Prometheus Default Plugin"
          },
          "parameters": {
            "description": "The specific configuration the register of the plugin",
            "type": "object",
            "properties": {
              "configurationProperties": {
                "description": "The fields necessary at configuration time",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/genericPluginField"
                }
              },
              "executionProperties": {
                "description": "The specific configuration that the plugin needs to execute it's functions",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/genericPluginField"
                }
              }
            }
          }
        }
      },
      "genericPluginField": {
        "description": "Generic plugin field representation",
        "type": "object",
        "properties": {
          "name": {
            "description": "The field name, expected in the request JSON",
            "type": "string",
            "example": "url"
          },
          "label": {
            "description": "The field label, if it's needed some user interaction in a frontend",
            "type": "string",
            "example": "Plugin URL"
          },
          "type": {
            "description": "The field type",
            "type": "string",
            "example": "string"
          },
          "required": {
            "description": "If the field is required",
            "type": "boolean",
            "example": true
          }
        }
      },
      "workspaceItemStatusField": {
        "description": "Generic workspace config field representation",
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
          },
          "name": {
            "type": "string",
            "example": "Config Name"
          },
          "status": {
            "type": "string",
            "example": "OK"
          }
        }
      },
      "circleRequest": {
        "description": "Request object user for creating a new circle",
        "required": [
          "name",
          "rules"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "example": "Circle Beagle"
          },
          "rules": {
            "description": "The segmentation rules for that circle",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/circleRuleSchema"
            },
            "minItems": 1
          }
        }
      },
      "circleCsvRequest": {
        "description": "Request object user for creating a new circle using CSV as base for segmentation",
        "required": [
          "name"
        ],
        "allOf": [
          {
            "$ref": "#/components/schemas/circleCsvRuleRequest"
          }
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "example": "Circle Beagle"
          }
        }
      },
      "circleRuleRequest": {
        "description": "Request object user for creating/updating circle segmentation rules",
        "required": [
          "rules"
        ],
        "properties": {
          "rules": {
            "description": "The segmentation rules for that circle",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/circleRuleSchema"
            },
            "minItems": 1
          }
        }
      },
      "circleCsvRuleRequest": {
        "description": "Request object user for creating/updating circle segmentation rules",
        "properties": {
          "key": {
            "description": "The key that will be used as a rule matcher",
            "type": "string",
            "example": "username"
          },
          "file": {
            "description": "The file containing the values to be used as truth in the matches",
            "format": "binary",
            "example": "some_file.csv"
          }
        }
      },
      "circleRuleSchema": {
        "description": "The segmentation rule schema",
        "properties": {
          "type": {
            "description": "The rule type",
            "type": "string",
            "enum": [
              "CLAUSE",
              "RULE"
            ]
          },
          "logicalOperator": {
            "description": "The logical operador for the rule",
            "type": "string",
            "enum": [
              "AND",
              "OR"
            ]
          },
          "clauses": {
            "description": "The sub-rules, if the type of this is CLAUSE",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/circleRuleSchema"
            }
          },
          "rule": {
            "description": "The rules, if the type of this is RULE",
            "type": "object",
            "properties": {
              "key": {
                "description": "The key to be used as rule matcher",
                "type": "string",
                "example": "username"
              },
              "condition": {
                "description": "The conditional to be used for verify the values",
                "type": "string",
                "enum": [
                  "EQUAL",
                  "GREATER_THAN",
                  "GREATER_THAN_OR_EQUAL",
                  "LOWER_THAN",
                  "LESS_THAN_OR_EQUAL",
                  "STARTS_WITH",
                  "NOT_EQUAL",
                  "ENDS_WITH",
                  "MATCHES",
                  "CONTAINS"
                ]
              },
              "values": {
                "description": "The values to be used as truth",
                "type": "array",
                "items": {
                  "type": "string",
                  "example": "darwin@zupit.com.br"
                }
              }
            }
          }
        }
      },
      "circleResponse": {
        "description": "The circle basic information",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
          },
          "name": {
            "type": "string",
            "format": "text",
            "example": "Circle Abc"
          }
        }
      },
      "circleFullResponse": {
        "description": "The circle basic information",
        "allOf": [
          {
            "$ref": "#/components/schemas/circleResponse"
          }
        ],
        "properties": {
          "rules": {
            "$ref": "#/components/schemas/circleRuleSchema"
          },
          "isActive": {
            "type": "boolean",
            "description": "If teh circle is active, the circle is active if and only if release is deployed on it"
          },
          "deployment": {
            "$ref": "#/components/schemas/deploymentResponse"
          }
        }
      },
      "circleComponentStatusResponse": {
        "description": "The component status",
        "properties": {
          "component": {
            "type": "string",
            "description": "The name of the component",
            "example": "front-end"
          },
          "status": {
            "type": "string",
            "description": "The present status of the component",
            "example": "RUNNING"
          },
          "pod": {
            "description": "The pod name",
            "type": "string",
            "example": "front-end-abc-zhg4"
          }
        }
      },
      "deploymentResponse": {
        "description": "The deployment object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
          },
          "components": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/basicComponentDeploymentSchema"
            }
          }
        }
      },
      "basicComponentDeploymentSchema": {
        "description": "The component object",
        "properties": {
          "name": {
            "description": "The component name",
            "type": "string",
            "example": "charles-frontend"
          },
          "version": {
            "description": "The image tag",
            "type": "string",
            "example": "9.6-beta"
          }
        }
      },
      "openSeaResponse": {
        "description": "The open sea information",
        "properties": {
          "releases": {
            "$ref": "#/components/schemas/basicComponentDeploymentSchema"
          }
        }
      },
      "componentSchema": {
        "description": "The component information",
        "required": [
          "name"
        ],
        "properties": {
          "helmConfig": {
            "$ref": "#/components/schemas/helmConfigSchema"
          },
          "name": {
            "type": "string",
            "example": "front-end"
          }
        }
      },
      "helmConfigSchema": {
        "description": "The helm config schema object",
        "required": [
          "organization",
          "repository"
        ],
        "properties": {
          "organization": {
            "type": "string",
            "example": "zupit"
          },
          "repository": {
            "type": "string",
            "example": "my-app-charts"
          },
          "path": {
            "type": "string",
            "example": "content"
          },
          "reference": {
            "type": "string",
            "example": "some-ref",
            "default": "main"
          }
        }
      },
      "componentFullResponse": {
        "description": "The component information",
        "allOf": [
          {
            "$ref": "#/components/schemas/componentSchema"
          }
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "3598e61a-870d-4e09-8d7a-08be5d21a6d8"
          }
        }
      },
      "componentResponse": {
        "description": "The component basic information",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "3598e61a-870d-4e09-8d7a-08be5d21a6d8"
          },
          "name": {
            "type": "string",
            "example": "backend"
          }
        }
      },
      "userSchema": {
        "description": "The local user schema object",
        "required": [
          "organization",
          "repository"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Peter Parker"
          },
          "email": {
            "type": "string",
            "example": "spiderman@email.com"
          },
          "image": {
            "description": "A base64 hash of the user's avatar",
            "type": "string"
          }
        }
      },
      "userResponse": {
        "description": "The user information",
        "allOf": [
          {
            "$ref": "#/components/schemas/userSchema"
          }
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "3598e61a-870d-4e09-8d7a-08be5d21a6d8"
          }
        }
      },
      "userGroupRequest": {
        "description": "The request object used for creating a new user group",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Charles dev group",
            "maximum": 64
          }
        }
      },
      "userGroupsResponse": {
        "description": "The user group information",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
          },
          "name": {
            "type": "string",
            "example": "Charles dev group"
          }
        }
      },
      "userGroupFullResponse": {
        "description": "The user group information",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "f28e0b9a-cf9b-4eec-9243-28c568a4dc6b"
          },
          "name": {
            "type": "string",
            "example": "Charles dev group"
          },
          "users": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "username": {
                  "type": "string",
                  "example": "charles@zup.com.br"
                },
                "memberId": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "userGroupMemberRequest": {
        "description": "The request object used for add members to an user group",
        "type": "array",
        "items": {
          "required": [
            "username"
          ],
          "type": "object",
          "properties": {
            "username": {
              "type": "string",
              "example": "charles@zup.com.br"
            }
          }
        }
      },
      "userGroupWorkspaceRequest": {
        "description": "The request object used for adding an user group to a workspace",
        "required": [
          "groupId"
        ],
        "properties": {
          "groupId": {
            "type": "string",
            "format": "uuid",
            "example": "c3e56c4f-9eb3-4397-99be-ac598ca02bdc"
          },
          "permissions": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "circle_read"
            }
          }
        }
      },
      "userGroupWorkspaceResponse": {
        "description": "The user group information when associated to a workspace",
        "properties": {
          "groupId": {
            "type": "string",
            "format": "uuid",
            "example": "c3e56c4f-9eb3-4397-99be-ac598ca02bdc"
          },
          "groupName": {
            "type": "string",
            "example": "Charles dev group"
          }
        }
      },
      "deploymentRequest": {
        "description": "The object used for making a deployment request",
        "required": [
          "components"
        ],
        "properties": {
          "overrideAllDeployments": {
            "type": "boolean",
            "default": false,
            "description": "Set to true if the deploy should remove all current components at circle and keep only the specified on the request (relevant only for not default circle)"
          },
          "components": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/basicComponentDeploymentSchema"
            }
          }
        }
      },
      "partialUnDeploymentRequest": {
        "description": "The request object for partial un-deployment",
        "properties": {
          "undeployAll": {
            "type": "boolean",
            "default": false,
            "description": "Optional. Set to true if the deploy should remove all current components at circle and keep only the specified in the 'components' property"
          },
          "components": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "frontend"
            }
          }
        }
      },
      "releaseRollbackRequest": {
        "description": "The request object used for requesting a rollback",
        "properties": {
          "deploymentId": {
            "type": "string",
            "format": "uuid",
            "example": "3598e61a-870d-4e09-8d7a-08be5d21a6d8"
          }
        }
      },
      "identifyRequest": {
        "description": "The request object used for calling the identify, it's a simple key value map",
        "type": "object",
        "example": {
          "username": "charles@zup.com.br",
          "location": "BR"
        }
      },
      "identifyResponse": {
        "description": "The identify response object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "de8fa547-ae35-4566-8a9d-a4731165bbaf"
          },
          "name": {
            "type": "string",
            "example": "Circle Abc"
          }
        }
      }
    },
    "parameters": {
      "pageSize": {
        "description": "The page size parameter, used for listing paginated resources",
        "name": "pageSize",
        "in": "query",
        "schema": {
          "type": "integer",
          "example": 50,
          "default": 20
        }
      },
      "pageNumber": {
        "description": "The page number parameter, used for listing paginated resources",
        "name": "pageNumber",
        "in": "query",
        "schema": {
          "type": "integer",
          "example": 2,
          "default": 0,
          "minimum": 0
        }
      },
      "headerWorkspaceId": {
        "description": "The workspace id sent in header to inform which workspace the operation in being applied",
        "name": "x-workspace-id",
        "in": "header",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "pathWorkspaceId": {
        "description": "The workspace id sent in path to inform which workspace the operation in being applied",
        "name": "workspaceId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "pathCircleId": {
        "description": "The circle id sent in path to inform which circle the operation in being applied",
        "name": "circleId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "nameFilter": {
        "description": "The name used for filtering the resources",
        "name": "name",
        "in": "query",
        "schema": {
          "type": "string",
          "example": "charlinho"
        }
      },
      "pathUserId": {
        "description": "The userId",
        "name": "userId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        }
      }
    }
  }
}