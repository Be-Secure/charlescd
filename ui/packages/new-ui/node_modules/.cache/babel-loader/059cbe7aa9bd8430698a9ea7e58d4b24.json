{"ast":null,"code":"import _slicedToArray from\"/Users/ricardobasilio/projects/charlescd/ui/packages/new-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import isEmpty from'lodash/isEmpty';import map from'lodash/map';import startsWith from'lodash/startsWith';import useOutsideClick from'core/hooks/useClickOutside';import{getExpandMode}from'core/utils/sidebar';import{getActiveMenuId,getExpandIcon}from'./helpers';import{menuItems}from'../constants';import Styled from'./styled';var MenuItems=function MenuItems(_ref){var isExpanded=_ref.isExpanded,expandMenu=_ref.expandMenu;var subMenuRef=useRef();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),focused=_useState2[0],setFocused=_useState2[1];var activeMenuId=getActiveMenuId();var isActive=function isActive(id){return startsWith(activeMenuId,id);};useOutsideClick(subMenuRef,function(){setFocused('');expandMenu({status:getExpandMode(),persist:false});});var onClickExpandSubMenu=function onClickExpandSubMenu(link){if(!isExpanded&&!isEmpty(link===null||link===void 0?void 0:link.subItems)){expandMenu({status:true,persist:false});}setFocused(link.id);};var displaySubItems=function displaySubItems(_ref2){var id=_ref2.id,subItems=_ref2.subItems;return isExpanded&&!isEmpty(subItems)&&(isActive(id)||focused===id);};var renderSubItems=function renderSubItems(subItems){return map(subItems,function(subItem){return/*#__PURE__*/React.createElement(Styled.SubLinkText,{key:subItem.id,\"data-testid\":subItem.id,isActive:activeMenuId===subItem.id},/*#__PURE__*/React.createElement(\"a\",{href:subItem.to},subItem.text));});};return/*#__PURE__*/React.createElement(\"div\",{\"data-testid\":\"sidebar-links\",ref:subMenuRef},/*#__PURE__*/React.createElement(Styled.Expand.Button,{\"data-testid\":\"sidebar-expand-button\",onClick:function onClick(){return expandMenu({persist:true});}},/*#__PURE__*/React.createElement(Styled.Expand.Icon,{name:getExpandIcon(getExpandMode()),size:\"15px\"})),map(menuItems,function(link){return/*#__PURE__*/React.createElement(Styled.Link,{key:link.icon,\"data-testid\":link.id,isActive:isActive(link.id),isExpanded:isExpanded,onClick:function onClick(){return onClickExpandSubMenu(link);}},/*#__PURE__*/React.createElement(\"a\",{href:link.to},/*#__PURE__*/React.createElement(Styled.LinkIcon,{name:link.icon,size:\"15px\",isActive:isActive(link.id)}),isExpanded&&/*#__PURE__*/React.createElement(Styled.LinkText,{isActive:isActive(link.id)},link.text)),displaySubItems(link)&&renderSubItems(link.subItems));}));};export default MenuItems;","map":{"version":3,"sources":["/Users/ricardobasilio/projects/charlescd/ui/packages/new-ui/src/modules/Main/Sidebar/MenuItems.tsx"],"names":["React","useRef","useState","isEmpty","map","startsWith","useOutsideClick","getExpandMode","getActiveMenuId","getExpandIcon","menuItems","Styled","MenuItems","isExpanded","expandMenu","subMenuRef","focused","setFocused","activeMenuId","isActive","id","status","persist","onClickExpandSubMenu","link","subItems","displaySubItems","renderSubItems","subItem","to","text","icon"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport isEmpty from 'lodash/isEmpty';\nimport map from 'lodash/map';\nimport startsWith from 'lodash/startsWith';\nimport useOutsideClick from 'core/hooks/useClickOutside';\nimport { getExpandMode } from 'core/utils/sidebar';\nimport { SubLink, Link, ExpandClick } from './Types';\nimport { getActiveMenuId, getExpandIcon } from './helpers';\nimport { menuItems } from '../constants';\nimport Styled from './styled';\n\ninterface Props {\n  isExpanded: boolean;\n  expandMenu: (state: ExpandClick) => void;\n}\n\nconst MenuItems = ({ isExpanded, expandMenu }: Props) => {\n  const subMenuRef = useRef<HTMLDivElement>();\n  const [focused, setFocused] = useState('');\n  const activeMenuId = getActiveMenuId();\n  const isActive = (id: string) => startsWith(activeMenuId, id);\n\n  useOutsideClick(subMenuRef, () => {\n    setFocused('');\n    expandMenu({ status: getExpandMode(), persist: false });\n  });\n\n  const onClickExpandSubMenu = (link: Link) => {\n    if (!isExpanded && !isEmpty(link?.subItems)) {\n      expandMenu({ status: true, persist: false });\n    }\n\n    setFocused(link.id);\n  };\n  const displaySubItems = ({ id, subItems }: Link) =>\n    isExpanded && !isEmpty(subItems) && (isActive(id) || focused === id);\n\n  const renderSubItems = (subItems: SubLink[]) =>\n    map(subItems, subItem => (\n      <Styled.SubLinkText\n        key={subItem.id}\n        data-testid={subItem.id}\n        isActive={activeMenuId === subItem.id}\n      >\n        <a href={subItem.to}>{subItem.text}</a>\n      </Styled.SubLinkText>\n    ));\n\n  return (\n    <div data-testid=\"sidebar-links\" ref={subMenuRef}>\n      <Styled.Expand.Button\n        data-testid=\"sidebar-expand-button\"\n        onClick={() => expandMenu({ persist: true })}\n      >\n        <Styled.Expand.Icon name={getExpandIcon(getExpandMode())} size=\"15px\" />\n      </Styled.Expand.Button>\n      {map(menuItems, link => (\n        <Styled.Link\n          key={link.icon}\n          data-testid={link.id}\n          isActive={isActive(link.id)}\n          isExpanded={isExpanded}\n          onClick={() => onClickExpandSubMenu(link)}\n        >\n          <a href={link.to}>\n            <Styled.LinkIcon\n              name={link.icon}\n              size=\"15px\"\n              isActive={isActive(link.id)}\n            />\n            {isExpanded && (\n              <Styled.LinkText isActive={isActive(link.id)}>\n                {link.text}\n              </Styled.LinkText>\n            )}\n          </a>\n          {displaySubItems(link) && renderSubItems(link.subItems)}\n        </Styled.Link>\n      ))}\n    </div>\n  );\n};\n\nexport default MenuItems;\n"]},"metadata":{},"sourceType":"module"}